<%- include('../index.ejs') %>
<div>
    <img src="data:image/jpeg;base64,<%= cover%>" alt="">
</div>
<h2><%= title %></h2>
<h3>by <%= artist.name%></h3>
<p><%= release_year%></p>
<% if(genres.length > 0) { %>
    <% for(const genre of genres) { %>
        <span><%= genre.name%></span>
        <% } %>
<% } else { %>
    <span>Genre not found.</span>
    <% } %>
<div>
    <a href=<%=`${url}/edit`%>>Edit</a>
</div>
<div>
    <button type="button" id="delete-button">Delete Album</button>
</div>
<div class="popup-container" hidden>
    <form action=<%=`${url}/?_method=DELETE`%> method="POST">
        <label for="delete">Are you sure you want to delete this album?</label>
        <button type="submit" name="delete" id="delete-action">Delete</button>
        <button type="button" id="cancel-button">Cancel</button>
    </form>
</div>
<script>
    const popupContainer = document.querySelector('div.popup-container'); 
    const deleteButton = document.querySelector('button#delete-button'); 
    const cancelButton = document.querySelector('button#cancel-button'); 

    deleteButton.addEventListener('click', showPopup); 
    cancelButton.addEventListener('click', disablePopup); 

    function disablePopup(){
        popupContainer.hidden = true; 
    }
    function showPopup(){
        popupContainer.hidden = false; 
    }


</script>