<%- include('../index.ejs') %>

<form action="" method="POST">
    <div class="field-container">
        <label for="title">Title: </label>
        <input type="text" name="title" id="title" value="<%= song ? song.title : '' %> " required="true">
    </div>
    <div class="field-container">
        <label for="artist">Artist: </label>
        <select name="artist" id="artist" required="true">
            <option value="" selected disabled hidden>Choose an artist</option>
     
            <% if(artists.length > 0) {%>
             <%   for(const artist of artists) {%>
                    <option value="<%= artist._id%>" <%= song ? song.artist._id === artist._id && 'selected' : '' %>> <%= artist.name%></option>
                    <% }%>
                <% }%>
        </select>
    </div>
    <div class="field-container">
        <label for="album">Album: </label>
        <select name="album" id="album" required="true">
            <option value="" selected disabled hidden>Choose an album</option>
            <% if(albums.length > 0 ) { %>
               <% for(const album of albums) { %>
                    <option value="<%= album._id%>" <%= song ? song.album._id === album._id && 'selected' : '' %>> <%= album.title%></option>
                    <%  } %>
                    <% } %>
        </select>
    </div>
    <div class="field-container">
        <label for="track_number">Track number: </label>
        <input type="number" id="track_number" name="track_number" value="<%= song ? song.track_number : '' %>" min="1">
    </div>

    <div class="field-container">
        <label for="genre">Genre: </label>
        <select name="genre" id="genre" required="true">
            <option value="" selected disabled hidden>Choose a genre</option>
            <% if(genres.length > 0 ) { %>
               <% for(const genre of genres) { %>
                    <option value="<%= genre._id%>" <%= song ? song.genre._id === genre._id && 'selected' : '' %>> <%= genre.name%></option>
                    <%  } %>
                    <% } %>
        </select>
    </div>
    <button type="submit">Submit</button>
</form>
<div>
    <% if(errors.length > 0) { %>
        <ul>
            <% errors.forEach(error => { %> 
                <li><%= error.msg%></li>
            <% }) %>
        </ul>
    <% } %>
</div>
