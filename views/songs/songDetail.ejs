<%- include("../index.ejs")%>

<h1><%= title %></h1>
<h2>by <%= artist.name%></h2>
<h3><%= album.title %> | Track Number: <%= track_number%> </h3>
<% if(genres.length > 0) { %>
    <% for(const genre in genres) { %>
        <p><%= genre.name%></p>
    <% } %>
<% } else { %>
    <p>Not genres found.</p>
<% } %>
<div>
    <a href=<%=`${url}/edit`%>>Edit</a>
</div>
<div>
    <button type="button" id="delete-button">Delete song</button>
</div>
<div class="popup-container" hidden>
    <form action=<%=`${url}/?_method=DELETE`%> method="POST">
        <label for="delete">Are you sure you want to delete this song?</label>
        <button type="submit" name="delete" id="delete-action">Delete</button>
        <button type="button" id="cancel-button">Cancel</button>
    </form>
</div>
<script>
    const popupContainer = document.querySelector('div.popup-container'); 
    const deleteButton = document.querySelector('button#delete-button'); 
    const cancelButton = document.querySelector('button#cancel-button'); 

    deleteButton.addEventListener('click', showPopup); 
    cancelButton.addEventListener('click', disablePopup); 

    function disablePopup(){
        popupContainer.hidden = true; 
    }
    function showPopup(){
        popupContainer.hidden = false; 
    }


</script>